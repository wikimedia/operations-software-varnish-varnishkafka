varnishkafka (1.0.14-2) UNRELEASED; urgency=medium

  * Update versioned dependency on libvarnishapi-dev. Require at least
    6.0.6-1wm1 due to breaking API/ABI changes between varnish 5.1 and 5.2.
    (Bug: T261487)

 -- Emanuele Rocca <ema@wikimedia.org>  Fri, 28 Aug 2020 10:48:30 +0200

varnishkafka (1.0.14-1) buster-wikimedia; urgency=medium

  * New upstream release
  * Build against buster (Bug: T242093)
  * Added myself to the uploaders list
  * Avoid building against varnish >= 5.2
  * Target varnish 5.1

 -- Valentin Gutierrez <vgutierrez@wikimedia.org>  Fri, 17 Jan 2020 14:45:52 +0000

varnishkafka (1.0.13-1) stretch-wikimedia; urgency=medium

  * New upstream release fixing builds on stretch (Bug: T186250)
  * Build against stretch-wikimedia (Bug: T200445)
  * Build-depend on librdkafka-dev >= 0.11.5, required for kafka.ssl support
  * Depend on lsb-base because of etc/init.d/varnishkafka

 -- Emanuele Rocca <ema@wikimedia.org>  Tue, 31 Jul 2018 08:11:13 +0000

varnishkafka (1.0.12-2) jessie-wikimedia; urgency=medium

  * Update default config file
    - Get rid of configuration options for features that have been removed,
      such as format.key and logline.data.copy
    - Specify the VSL query to use with varnish.arg.q instead of the old
      varnish.arg.m, used by Varnish 3
    - Set output to `stdout` in order to have a working-by-default config
      file

 -- Emanuele Rocca <ema@wikimedia.org>  Mon, 12 Dec 2016 14:59:46 +0100

varnishkafka (1.0.12-1) jessie-wikimedia; urgency=medium

  * New upstream release: improved resiliency during
    Varnish start/restart events.
    - Changes included up to: https://gerrit.wikimedia.org/r/#/c/311415/
    - Change-Id: I87048786b36de325aee663a873b12874588664fb
    - Bug: T138747
  * Update Standards-Versions to 3.9.8
  * Rename git-buildpackage to buildpackage

 -- Luca Toscano <ltoscano@wikimedia.org>  Wed, 21 Sep 2016 12:04:00 +0200

varnishkafka (1.0.11-1) jessie-wikimedia; urgency=medium

  * New upstream release: added the -T and -L command line
    parameters to tune the VSL API settings. Also added the
    VLS_API formatter to log VSL warning/errors.
    Changes included up to: https://gerrit.wikimedia.org/r/#/c/295652/
    Change-Id: I302922a6490d287e4d866481530d2807293706a8
    Bug: T136314

 -- Luca Toscano <ltoscano@wikimedia.org>  Tue, 12 Jul 2016 15:31:35 +0200

varnishkafka (1.0.10-1) jessie-wikimedia; urgency=medium

  * New upstream release: Extend the %{format}t timestamp formatter
    with the 'end:' prefix.
    Changes included up to: https://gerrit.wikimedia.org/r/292172
    Change-Id: Ib20b0cc6fa8ecc2fd6f1fe899d0c5d630681c3e
    Bug: T136314

 -- Luca Toscano <ltoscano@wikimedia.org>  Tue, 07 Jun 2016 08:45:32 +0000

varnishkafka (1.0.9-1) jessie-wikimedia; urgency=medium

  * Use LDFLAGS in Makefile
  * README updated with latest changes for Varnish 4

 -- Luca Toscano <ltoscano@wikimedia.org>  Tue, 12 Apr 2016 08:46:56 +0000

varnishkafka (1.0.8-3) jessie-wikimedia; urgency=medium

  * Remove logrotate/rsyslog configurations.
  * Add myself to Uploaders.

 -- Luca Toscano <ltoscano@wikimedia.org>  Thu, 07 Apr 2016 11:28:22 +0000

varnishkafka (1.0.8-2) jessie-wikimedia; urgency=medium

  * Depend on varnish 4.1.2 instead of 4 to avoid the issues we have seen
    on cp1043. Tags where not reported at all and rebuilding against 4.1.2
    solved the problem.

 -- Emanuele Rocca <ema@wikimedia.org>  Thu, 31 Mar 2016 11:12:53 +0000

varnishkafka (1.0.8-1) jessie-wikmiedia; urgency=medium

  * New upstream release: code ported to Varnish 4 VSL API.
    Changes included up to https://gerrit.wikimedia.org/r/#/c/280612/
    Change-Id: I9bf698859005050172bd05dc68ec5f19531a9ddf
  * Add versioned dependency on varnish >= 4.
  * Add myself to Uploaders.
  * Bump Standards-Version.

 -- Emanuele Rocca <ema@wikimedia.org>  Thu, 31 Mar 2016 10:37:57 +0000

varnishkafka (1.0.7-1) jessie-wikmiedia; urgency=medium

  * allow config lines up to 4K length

 -- Andrew Otto (WMF) <otto@wikimedia.org>  Wed, 25 Nov 2015 21:24:09 +0000

varnishkafka (1.0.6-3) jessie-wikimedia; urgency=medium

  * Fix rsyslog restart on hosts without "restart" command (jessie)

 -- Brandon Black <bblack@wikimedia.org>  Fri, 16 Jan 2015 19:50:32 +0000

varnishkafka (1.0.6-1) trusty-wikimedia; urgency=medium

  * Updated to 1.0.6 for:
    * ddcdace allow zero-length scratch adds as well
    * 8b449cc allow zero-length const_string_add()

 -- Brandon Black <bblack@wikimedia.org>  Mon, 27 Oct 2014 18:16:31 +0000

varnishkafka (1.0.3-1) trusty-wikimedia; urgency=low

  * Updated to 1.0.3, which brings in:
    * 7bc65eb Remove debian/ directory from master branch
    * 84f3833 Check assumptions, fix heap overflow
    * 0f5b69c Added %D and %T formatters (request time)
  * Added Build-Depends on zlib1g-dev to debian/control

 -- Brandon Black <bblack@wikimedia.org>  Thu, 23 Oct 2014 22:27:51 +0000

varnishkafka (1.0.2-1) precise; urgency=low

  * Dont require whitespace-separated Hdr:fields
  * Explicitly link with zlib
  * logrotate scripts now redirect stderr to /dev/null

 -- Andrew Otto (WMF) <otto@wikimedia.org>  Mon, 07 Mar 2014 19:44:00 +0000

varnishkafka (1.0.1-1) precise; urgency=low

  * Fix for converting 'nan' to null in json output
  * Adding suppot for %{Varnish:xid}x (X-Varnish: ..)

 -- Andrew Otto (WMF) <otto@wikimedia.org>  Tue, 07 Jan 2014 16:30:08 +0000

varnishkafka (1.0.0-2) precise; urgency=low

  * Fix for logrotate postrotate reload

 -- Andrew Otto (WMF) <otto@wikimedia.org>  Wed, 18 Dec 2013 16:33:46 +0000

varnishkafka (1.0.0-1) unstable; urgency=low

  * Initial release.

 -- Andrew Otto (WMF) <otto@wikimedia.org>  Wed, 04 Dec 2013 19:56:07 +0000
